<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>精选图库|感受生活美好</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<style>
		*{magin: 0;padding: 0;}
		
		#loading {
			border: 0.3px solid #eee;/*进度边框*/
			border-radius: 20px;
			width: 5%;
			height: 25px;
			transition: 1.8s;
			background: #1FA2FF;  /*兼容不支持该功能的浏览器*/
			background: -webkit-linear-gradient(to left, #A6FFCB, #12D8FA, #1FA2FF);  /* Chrome  Safari */
			background: linear-gradient(to left, #A6FFCB, #12D8FA, #1FA2FF); /* 高端浏览器*/
		}
	
		#load {
			border: 1px solid #eee;border-radius: 20px;margin: 0 20%;padding: 0;
			background: #5433FF;  /* fallback for old browsers */
			background: -webkit-linear-gradient(to left, #A5FECB, #20BDFF, #5433FF);  /* Chrome 10-25, Safari 5.1-6 */
			background: linear-gradient(to left, #A5FECB, #20BDFF, #5433FF); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
		}
		
		body {
			background: #a8ff78;  /* fallback for old browsers */
			background: -webkit-linear-gradient(to right, #78ffd6, #a8ff78);  /* Chrome 10-25, Safari 5.1-6 */
			background: linear-gradient(to right, #78ffd6, #a8ff78); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
		}
		#picture , #nextPicture{
			top: 0;left: 0;
			position: fixed;
			width: 100%;
			height: 100%;
			background-size: 100% 100%;
			background-repeat: no-repeat;
		}
		#picture { z-index: -1;}
		#nextPicture{ z-index: -1;}
		
		
		#text{
			color: #ffffff;
			bottom: 1.8%;
			position: absolute;
			overflow: hidden;
			z-index: 8;
		}
		/*对话框||模态框*/
		#msgbox{ border: 1px solid #eee;display: none;
			background: #000;
			z-index: 99;color: #fff;opacity: 0.8;
			position: fixed;transition: 1s;
			top: 9%;width: 68%;height: auto;
			margin-left: 16%;padding: 0;border-radius: 25px;}
			/*对话框标题 ;内容;按钮;↓*/
			#msgbox h3 { padding: 2% 5% 2% 5%;border-bottom: 1px solid #eee;}
			#msgbox div{ padding: 1% 4% 1% 4%;color : #fcfcfc;overflow: hidden;}
			#msgbox button{ margin: 3%;float: right;background: #000;border: 0.5px solid #fff;color: #fff;padding: 5px;}
		#toolBar{
			width: 70%;
			margin-left: 30%;
			z-index: 16;
			position: fixed;top: 0;left: 0;
			background: #000;
			color: #fff;
			opasity: 0.6;
			display: none;
		}
		#toolBar>span {padding: 0 5%;text-align: center;}
		#toolBar>span:hover {transition:1s;background:#eee;}
		#toolBar>a {float: right;}
		#music-choose {
			z-index: 16;color: #fff;
			position: fixed;top: -100%;left: 20%;width: 60%;height: 70%;padding:0;
			background-color: #000;opacity: 0.8;
			border: 0.5px solid #eee;border-radius: 3px;
			transition: 2s;
		}/*选择音乐栏目*/
			#music-choose>h4{ padding: 3px 5px 1px 5px;border-bottom: 0.5px solid #eee;}
			#music-choose>div{ padding: 1px 4px 1px 4px;transition: 0.8s;}
			#music-choose>div:hover{ background: #fff;color: #000;}
			#music-choose button{ border: 0.5px solid #eee;background: #000;width: 30px;height: 30px;float: right;color: #fff;}
	/*设置黑幕在加载过程中让人没那么忙着急*/
	#blackBar{
		position: fixed;
		height: 100%;width: 100%;top: 0;left: 0; 
		background: #000;
		z-index: 1;
		opacity: 0.96;display: none;
	}
	
	</style>
</head>

<body>

	<div id="picture"></div>
	<div id="nextPicture"></div>
	
	<div id="blackBar"></div>
	<div id="toolBar">
		<span onclick="before()">←</span>
		<span>≡</span>
		<span onclick="pages()">→</span>
		<span onclick="document.getElementById('music-choose').style.top='20%';document.getElementById('music-choose').style.opacity='0.8';">音乐</span>
		<span onclick="toolBar.display='none';">╳</span>
		<a onclick="msgbox.style.top='15%';">关于</a>
	</div>
	<h3 style="text-align:center;color:#7B68EE">精选图库，发现美好</h3>
	<div style="margin:25% 35% 0;color:green;">加载中......</div>
	
	<div id="load">
		<div id="loading"></div>
	</div>
	<div id="text"></div>
	
	<iframe id="audio" onload="console.log('Music Loading')" loading="lazy" frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="https://music.163.com/outchain/player?type=2&id=5276811&auto=1&height=66"></iframe>
	<div id="msgbox">
		<h3>提示</h3>
		<div>
			1.如果你不想费钱，就不要打开流量；2.如果图片加载不出来，或音乐不播放，那不是Bug，要么是网易云的服务器拿去烤土豆崩了，要么你自己网线被老鼠啃了!自己设备不行就别乱说。
		</div>
		<button onclick="msgbox.style.top='-90%';msgbox.style.zIndex='1000';msgbox.style.zIndex='1001';msgbox.style.zIndex='99';">确认</button>
	</div>
	
	<!--乐曲选框-->
	<div id="music-choose">
		<h4>乐曲选择<i>网易云音乐</i>
		<button onclick="document.getElementById('music-choose').style.top='-100%';document.getElementById('music-choose').style.opacity='0.1';">╳</button>
		<button onclick="audio.src='';">| |</button></h4>
		<div onclick="music(1)">蓝色多瑙河</div>
		<div onclick="music(2)">钢铁洪流进行曲</div>
	</div>
	<noscript>
		您的浏览器未支持主插件：javascript未启用!!!
	</noscript>

	<script>
	//突然想起没有绑定nextPicture的点击事件
		var picture=document.getElementById("picture");
		var nextPicture=document.getElementById("nextPicture");
			var _nextPicture=nextPicture.style;
		var loadValue=document.getElementById("loading");
		var audio=document.getElementById("audio");
		var newSrc=audio.src;
		var msgbox=document.getElementById("msgbox");
		var num;var page=2; //两者分别为音乐，图片 图片默认值:2
		console.log("ready");
		setTimeout(function(){
			loadValue.style.width="12%";
		},1500)
		setTimeout(function(){
			loadValue.style.width="32%";
				console.log("$loading.value=1\n||进度条加载");
				picture.style.backgroundImage="url(pictures/main.jpg)";
		},4600)
		
		setTimeout(function(){
			loadValue.style.width="85%";
				picture.style.zIndex="5";
				msgbox.style.display="block";
				nextPicture.style.zIndex="3";
		},5600)
		setTimeout(function(){
			loadValue.style.width="99%";
			audio.src = newSrc;
			console.log(audio.src);
			document.getElementById("blackBar").style.display="block";
		},8000)
		
		//优化加载，异步处理，获得良好体验
	//------异步编程-------js执行8秒后加载新的背景图片，
		//以便用户之后能快速获得新一轮图片↓
	
		//还是不太好，得继续优化	
		/*var information = '{"main":['+
			'{"title":"星空","text":"繁星闪烁，宁静祥和。"} ]}';
		inf = JSON.parse(information);
		var n;
		var pages = document.cookie = "page=1;sexpires=Thu, 18 Dec 2043 12:00:00 GMT; path=/";
		document.getElementById("text").innerHTML = "<h3>" + inf.main[0].title + "</h3>" +inf.main[0].text;
	注： ---------描述文字*/
		var toolBar = document.getElementById("toolBar").style;
		
		var getToolBar=0;
		nextPicture.onclick=function(){
			console.log("|||User Clicked.");
			toolBar.display="block";
			getToolBar=1;
			setTimeout(function(){
				toolBar.display="none";
			},6000)
		}
		picture.onclick=function(){
			console.log("|||User Clicked.");
			toolBar.display="block";
			getToolBar=1;
			setTimeout(function(){
				toolBar.display="none";
			},6000)
		}//点击图片的操作
		
		//音乐播放
		var amusic=new Array(); 
		//设置音乐链接数组
			amusic[1]="https://music.163.com/outchain/player?type=2&id=5276811&auto=1&height=66";
			amusic[2]="https://music.163.com/outchain/player?type=2&id=1394369908&auto=1&height=66";
		
		//控制音乐的函数 num表示曲目序号
		function music(num){
			audio.src=amusic[num];
		}
		
		var ap1=new Array(); 
		var ap2=new Array();
		//设置2个数组存放数据
		//设置图片路径组
			ap1[1]="pictures/main.jpg";//本地
			ap1[2]="https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1651450661048-be61eba55f1a?ixlib=rb-1.2.1&q=80&fmt=jpg&crop=entropy&cs=tinysrgb&dl=joshua-lawrence-_GPn7zmkjD4-unsplash.jpg";//链接 链接至  Unplash 图库
			ap2[1]="https://dogefs.s3.ladydaily.com/~/source/unsplash/photo-1621290102989-e9865bef2dcf?ixlib=rb-1.2.1&q=80&fmt=jpg&crop=entropy&cs=tinysrgb&dl=vlad-d-nqSeto6vWfU-unsplash.jpg";
		//下一张图片
		
		var change=0;
		var ap1_num=1;var ap2_num=0;
		function pages(){
			if(change==0){
				//显示ap2图片
				//优化加载速度
				setTimeout(function(){
				picture.style.zIndex="3";
				//来个调试Debug
				console.log("异步程序加载成功");
				},3000)//3秒后再加载图片
				nextPicture.style.zIndex="5";
				ap1_num+=1;
				//ap1_num +1!哈哈，算不过来了
				change+=1;
				// 注：change  ::  判段改变类型 1：ap1??-->true else flase;;
				picture.style.backgroundImage="url("+ap1[ap1_num]+")";
					//将背景图片加载前置判断后置  有效提升加载速度
				//判断是否为最后一张图片
				if(ap2_num==ap2.length-1){
					//如果此时ap1序号是数组ap1的长度，则抓了个空图片路径
					if(ap1_num==ap1.lenght){
						console.log("还有ap1一张图片");	
						//不做响应
					}else{
						console.log("切换图片");
						ap1_num=1;
						picture.style.backgroundImage="url("+ap1[ap1_num]+")";
					}
				}
					//此时有两种情况:1.ap1[ap1_num]是最后一张图片？？？想不出来了
					//2.ap2[ap2_num]是最后一张图片,使ap1图片路径重置		
			}else if(change==1){
				setTimeout(function(){
				nextPicture.style.zIndex="3";
				},3000)
				picture.style.zIndex="5";
				ap2_num+=1;
				change-=1;
				nextPicture.style.backgroundImage="url("+ap2[ap2_num]+")";
				
				if(ap1_num==ap1.length-1){
					//如果此时ap1序号是数组ap1的长度，则抓了个空图片路径
					if(ap2_num==ap2.lenght){
						console.log("还有ap1一张图片");	
						//不做响应
					}else{
						console.log("[AP2]最后一张图片");
						ap2_num=1;
						picture.style.backgroundImage="url("+ap2[ap2_num]+")";
					}
				}
			}
			
		}
		function before(){
			ap1_num-=1;ap2_num-=1;
			(change==1)?0:1;
			pages();
			
		}
		/*
		function setCookie(cname,cvalue,exdays) { 
			var d = new Date(); d.setTime(d.getTime()+(exdays*24*60*60*1000)); 
			var expires = "expires="+d.toGMTString();
			document.cookie = cname + "=" + cvalue + "; " + expires; 
			console.log("设置cookie");
		}
		
		function getCookie(cname) { 
			var name = cname + "="; 
			var ca = document.cookie.split(';'); 
			console.log("获取cookie");
			for(var i=0; i<ca.length; i++) { 
				var c = ca[i].trim(); 
				if (c.indexOf(name)==0) return c.substring(name.length,c.length);
			} 
			
			return ""; 
		}
		function checkCookie() { 
			console.log("检查cookie");
			var username=getCookie("username");
			if (username!="") { 
				alert("Welcome again " + username); 
			} else {
				username = prompt("Please enter your name:",""); 
				if (username!="" && username!=null) { 
					setCookie("username",username,365); 
					} 
				}
			}
		*/
	</script>
	
</body>
    
    
    
    
    